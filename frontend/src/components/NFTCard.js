import React, { useContext } from 'react'
import ReactTooltip from 'react-tooltip'
import '../styles/nftcard.css'
import { calculateRankFor } from '../utils/greenRanks'
import AppContext from '../appContext'

const NFTCard = ({ entry }) => {

    const { name, description, imageURL, donation } = entry
    const { web3 } = useContext(AppContext)

    return (
        <div className="max-w-xs bg-white shadow-lg rounded-lg overflow-hidden my-4 hover:shadow-sm transform transition duration-500 hover:scale-105">
            <div className='p-2'><img className="w-full h-64 rounded-md shadow-lg"
                src={`https://${imageURL.split('ipfs://')[1]}.ipfs.dweb.link`} alt="avatar" />
            </div>
            <div>
                <div className="flex flex-col text-left px-4 py-2 ">
                    <h4 className="px-2 text-xs font-bold text-gray-400">{name}</h4>
                    <span className="px-2 text-xs break-words">{description.length > 60 ? `${description.substr(0, 60)}...` : description}</span>
                </div>
                <div className="flex items-center px-4 py-2 text-gray-700">
                    <svg width="35" height="35" xmlns="http://www.w3.org/2000/svg">
                        <g>
                            <title>Layer 1</title>
                            <g stroke="null" id="svg_1">
                                <g stroke="null" id="svg_2">
                                    <path stroke="null" fill="#047857" d="m3.07203,32.02209c0.20351,-0.06108 0.42227,-0.13365 0.66561,-0.20165c0.25214,-0.05615 0.51197,-0.13317 0.80072,-0.19462c0.57874,-0.12195 1.23187,-0.24674 1.95794,-0.34625c0.18078,-0.02585 0.36517,-0.05211 0.55337,-0.07912c0.18965,-0.02197 0.38285,-0.0443 0.57933,-0.06706c0.39093,-0.04955 0.79954,-0.0884 1.21853,-0.12741c0.41748,-0.04331 0.85218,-0.07094 1.2918,-0.10842c0.44317,-0.02548 0.89364,-0.06255 1.3537,-0.08662c0.92078,-0.04782 1.87231,-0.09076 2.84152,-0.11482c0.96862,-0.02684 1.95373,-0.03848 2.93865,-0.04016c0.98492,0.00141 1.97022,0.01201 2.93884,0.03901c0.96941,0.02244 1.92074,0.06753 2.84172,0.11388c0.46,0.02459 0.91059,0.06066 1.35383,0.0863c0.43982,0.03754 0.87445,0.06596 1.29206,0.10842c0.41905,0.03885 0.82747,0.07849 1.21853,0.12741c0.19648,0.02281 0.38968,0.04525 0.57933,0.06737c0.18801,0.02684 0.3726,0.05332 0.55331,0.07896c0.7262,0.09962 1.37946,0.22477 1.95794,0.34683c0.28868,0.06182 0.54858,0.13852 0.80078,0.19499c0.24334,0.06816 0.46203,0.14088 0.66535,0.20212c0.37785,0.14523 0.699,0.25235 0.892,0.36738c0.20227,0.1003 0.3101,0.15373 0.3101,0.15373s-0.08162,-0.07749 -0.23446,-0.22267c-0.07892,-0.07104 -0.16619,-0.16379 -0.30202,-0.25366c-0.12992,-0.09259 -0.28106,-0.20841 -0.46308,-0.31783c-0.1838,-0.10287 -0.38633,-0.22367 -0.61515,-0.34463c-0.23282,-0.11121 -0.48773,-0.23426 -0.76688,-0.35186c-0.56126,-0.22828 -1.21248,-0.46249 -1.94124,-0.66728c-0.18275,-0.05086 -0.36924,-0.10266 -0.55922,-0.15546c-0.19188,-0.04672 -0.38738,-0.09416 -0.58603,-0.14266c-0.39776,-0.10072 -0.81412,-0.17968 -1.24199,-0.26645c-0.21383,-0.04588 -0.43174,-0.08363 -0.65293,-0.11907c-0.22126,-0.03691 -0.44521,-0.07429 -0.67166,-0.11199c-0.45342,-0.06947 -0.9192,-0.13076 -1.39293,-0.18964c-0.47399,-0.05358 -0.95692,-0.11136 -1.44701,-0.14822c-0.24511,-0.02087 -0.49147,-0.04174 -0.73915,-0.06276c-0.24794,-0.01777 -0.49745,-0.02947 -0.74802,-0.04477c-0.57394,-0.0367 -1.15386,-0.0571 -1.73615,-0.07026c-0.06341,-0.88623 -0.43358,-1.7669 -0.93477,-2.61848c-0.35269,-0.59907 -0.73875,-1.19353 -1.08966,-1.7927c-0.14273,-0.24432 -0.47833,-0.58979 -0.37963,-0.8402c0.06315,-0.15965 0.10698,-0.32088 0.14864,-0.48194c0.18958,-0.73659 0.2415,-1.70834 1.46219,-2.24995c-0.90901,0.24385 -1.47632,0.72244 -1.80265,1.17455c0.31713,-1.25781 0.39895,-2.4486 -0.2779,-3.68365c-0.63118,-1.15273 -1.53664,-2.28203 -1.84714,-3.47042c-0.29262,-1.11986 -0.00361,-2.28544 1.00719,-3.31014c0.23933,-0.24134 0.5148,-0.4736 0.81721,-0.69774c0.18604,-0.13831 0.19241,-0.24469 0.56264,-0.19011c0.24452,0.03597 0.48444,0.07539 0.74237,0.03964c0.89259,-0.12001 1.52377,-0.55513 1.83078,-0.95303c-0.56435,0.23599 -1.59973,0.58497 -2.39703,0.58497c2.95724,-1.17345 5.21345,-3.02361 6.00734,-4.81856c0.221,-0.50055 0.34204,-1.01154 0.36037,-1.52368c0.00821,-0.23195 -0.02655,-0.46417 -0.03976,-0.69628c-0.03976,-0.69628 -0.25326,-0.39223 -0.25326,-0.39223c0.01511,0.19268 0.04685,0.38358 0.04212,0.5761c-0.00835,0.33466 -0.07544,0.66823 -0.16336,1.00001c-0.50363,-0.36193 -1.07028,-0.69402 -1.31079,-1.12259c0.14799,0.67525 1.0436,1.30373 0.92669,1.9891c-0.11,0.64253 -0.79369,1.30641 -1.43788,1.86301c-1.29797,1.12143 -3.29067,1.9631 -4.88889,2.97385c-3.12705,1.97804 -3.31183,4.42743 -2.03679,6.75571c-0.75406,-0.24065 -1.75186,-0.22257 -2.47372,-0.50396c0.62073,0.33807 1.24994,0.6721 1.93198,0.98706c0.3101,0.14229 0.6919,0.25444 0.95114,0.42096c0.30544,0.19572 0.36977,0.46217 0.4734,0.69486c0.23683,0.53038 0.39428,1.07142 0.3352,1.61496c-0.11927,1.10765 -1.10097,2.16428 -0.87793,3.28576c0.36556,1.86621 2.34381,3.54372 3.08262,5.36725c-0.94509,0.01043 -1.8894,0.02742 -2.81799,0.08709c-0.25037,0.01479 -0.49988,0.02941 -0.74802,0.04415c-0.24774,0.02097 -0.49423,0.04205 -0.73941,0.06287c-0.49003,0.03754 -0.97302,0.09401 -1.44715,0.14791c-0.47373,0.0594 -0.93964,0.1197 -1.39293,0.18948c-0.45263,0.07975 -0.89679,0.14041 -1.32452,0.23101c-0.42793,0.08677 -0.84436,0.16636 -1.24231,0.2665c-0.19865,0.04844 -0.39415,0.09611 -0.58597,0.14298c-0.19004,0.05275 -0.3766,0.10455 -0.55942,0.15546c-0.7287,0.205 -1.38025,0.43942 -1.94124,0.66786c-0.27895,0.11807 -0.53425,0.24086 -0.76694,0.35217c-0.22882,0.12127 -0.43134,0.24213 -0.61488,0.3451c-0.35393,0.22896 -0.61409,0.41907 -0.76431,0.57181c-0.15305,0.14565 -0.23466,0.22336 -0.23466,0.22336s0.10777,-0.05332 0.30984,-0.15326c0.18656,-0.11105 0.50849,-0.22 0.89219,-0.36764l0,0.00001z" id="svg_3" />
                                    <path stroke="null" fill="#047857" d="m20.88606,18.98438c0.15173,-0.07707 0.2961,-0.16416 0.42563,-0.26425c0.22382,-0.17297 0.45513,-0.42374 0.45244,-0.68589c-0.65549,0.64096 -1.84445,0.54407 -2.71581,0.84874c-0.67317,0.23552 -1.20709,0.68505 -1.56556,1.1908c-0.05559,0.07859 -0.56264,1.05658 -0.30406,1.06334c0.06414,0.00157 0.13393,-0.25639 0.15081,-0.2944c0.06006,-0.13506 0.16606,-0.2535 0.29072,-0.35632c0.2572,-0.21192 0.60056,-0.34578 0.95515,-0.41939c0.65148,-0.13543 1.5172,-0.14838 1.96924,-0.61034c0.09371,-0.0959 0.15824,-0.21973 0.138,-0.34331c-0.01189,-0.07172 0.13544,-0.09448 0.20345,-0.12898l0,0z" id="svg_4" />
                                    <path stroke="null" fill="#047857" d="m8.36512,14.51878c0.06795,0.03466 0.21534,0.05741 0.20351,0.12882c-0.0205,0.12352 0.04423,0.24742 0.13793,0.34331c0.45185,0.46207 1.31749,0.47507 1.96924,0.61029c0.35472,0.07367 0.69795,0.20747 0.95515,0.41939c0.12486,0.10282 0.23065,0.22126 0.29078,0.35632c0.01689,0.03801 0.08668,0.29602 0.15081,0.2944c0.25878,-0.00671 -0.24833,-0.98475 -0.30406,-1.06334c-0.35853,-0.50574 -0.89219,-0.95544 -1.56563,-1.19075c-0.8713,-0.30467 -2.06012,-0.20778 -2.71581,-0.84874c-0.00263,0.26215 0.22842,0.51293 0.45244,0.68589c0.12946,0.1003 0.27383,0.18739 0.42563,0.2644l0,0z" id="svg_5" />
                                    <path stroke="null" fill="#047857" d="m22.51963,6.69616c0.03916,0.00545 0.10974,-0.14791 0.12426,-0.17008c0.05146,-0.07865 0.12913,-0.14392 0.21679,-0.19829c0.18032,-0.11215 0.40519,-0.17055 0.63032,-0.19127c0.41393,-0.03817 0.94555,0.01347 1.27228,-0.23856c0.06775,-0.05227 0.12065,-0.12369 0.1217,-0.20086c0.00039,-0.04462 0.09305,-0.04844 0.13846,-0.06496c0.1014,-0.03675 0.19931,-0.08022 0.2894,-0.13249c0.15581,-0.09065 0.32449,-0.22828 0.3513,-0.38903c-0.4709,0.34766 -1.18889,0.20647 -1.75554,0.33319c-0.43791,0.09805 -0.81334,0.33676 -1.08763,0.62182c-0.04298,0.0443 -0.45921,0.60856 -0.30136,0.63053l0,0z" id="svg_6" />
                                    <path stroke="null" fill="#047857" d="m20.33584,10.79905c-0.37936,-0.20023 -0.85145,-0.27049 -1.30119,-0.24946c-0.06979,0.00336 -0.87714,0.12127 -0.79474,0.23085c0.0205,0.02711 0.21193,-0.03046 0.24242,-0.03623c0.10817,-0.02039 0.22086,-0.0162 0.32988,0.001c0.22435,0.03544 0.42661,0.13281 0.59372,0.25523c0.30688,0.22477 0.60595,0.57936 1.05858,0.6116c0.09384,0.00676 0.19622,-0.00802 0.26975,-0.05804c0.04258,-0.02889 0.10678,0.02454 0.15219,0.04105c0.10113,0.03707 0.20641,0.06774 0.31496,0.08777c0.18775,0.03481 0.42865,0.04651 0.59859,-0.04268c-0.63736,-0.05657 -0.97335,-0.58198 -1.46417,-0.84109l0,0z" id="svg_7" />
                                    <path stroke="null" fill="#047857" d="m20.21098,2.63485c0.03864,0.02517 0.12709,0.04782 0.11322,0.09097c-0.02385,0.07477 0.00447,0.15451 0.05329,0.219c0.23526,0.31012 0.76596,0.36853 1.15386,0.48965c0.21114,0.06596 0.40979,0.16814 0.54844,0.31338c0.06722,0.07041 0.12144,0.14937 0.14595,0.23583c0.00683,0.02438 0.02615,0.18691 0.06571,0.18964c0.15969,0.0109 -0.06249,-0.61946 -0.08944,-0.67095c-0.17388,-0.33162 -0.46065,-0.63886 -0.85277,-0.82269c-0.50751,-0.23798 -1.24692,-0.24758 -1.59099,-0.67966c-0.0257,0.16091 0.09358,0.32842 0.21521,0.44781c0.07064,0.06884 0.15134,0.13092 0.23749,0.18702l0,0z" id="svg_8" />
                                    <path stroke="null" fill="#047857" d="m18.57905,6.17044c-0.02044,0.36224 0.38015,0.64605 0.61823,0.91863c0.12978,0.14843 0.22356,0.32135 0.23769,0.50359c0.00683,0.0884 -0.00296,0.17805 -0.04284,0.2609c-0.01117,0.02323 -0.10829,0.16699 -0.07741,0.18686c0.12512,0.07975 0.3795,-0.54276 0.39297,-0.5975c0.08622,-0.3528 0.06184,-0.73544 -0.13616,-1.06208c-0.25615,-0.42274 -0.864,-0.75856 -0.84941,-1.27018c-0.13346,0.12237 -0.15107,0.31448 -0.13294,0.46768c0.01051,0.08856 0.03463,0.17585 0.06703,0.26074c0.01452,0.03801 0.07242,0.09611 0.03082,0.12578c-0.07169,0.05138 -0.10363,0.13029 -0.10797,0.20558l0,-0.00001z" id="svg_9" />
                                    <path stroke="null" fill="#047857" d="m8.0311,21.50885c0.18137,0.10544 0.37864,0.19289 0.58255,0.26698c0.09154,0.03324 0.2781,0.0409 0.27889,0.13076c0.00158,0.1553 0.10836,0.29906 0.24472,0.40429c0.65792,0.50732 1.72853,0.4035 2.56158,0.48037c0.45342,0.04168 0.90586,0.15928 1.26919,0.38505c0.17638,0.10958 0.33264,0.24097 0.43614,0.39931c0.02918,0.04462 0.17132,0.35312 0.25017,0.34237c0.31773,-0.0443 -0.52038,-1.18037 -0.60608,-1.26955c-0.55219,-0.57422 -1.30823,-1.05485 -2.19004,-1.2522c-1.14092,-0.25513 -2.58629,0.02889 -3.53447,-0.67095c0.05388,0.32407 0.39349,0.60132 0.70734,0.78357l0,0z" id="svg_10" />
                                </g>
                            </g>
                        </g>
                    </svg>
                    <h1 data-arrow-color='#fff'
                        data-tip='Based on the total eth that has been donated via transactions with this NFT.'
                        className="px-2 text-sm"
                        data-border-color='#047857'
                        data-border={true}>Rank {calculateRankFor(donation, web3)}</h1>
                    <ReactTooltip className='w-40 popup' />
                </div>
            </div>
        </div>
    )
}

export default NFTCard
